@model ShareholderModel

@{
    ViewData["Title"] = "Activate your Account";
}

<div class="mw-700px scroll-y mt-5 mx-auto pt-0 pb-15">
    <div class="text-center mb-13">
        <h1 class="mb-3">Activate your Account</h1>
        <div class="text-muted fw-bold fs-5">
            Complete all the steps on this page to activate your shareholder's account.
        </div>
    </div>

    @if (Model.ActionRequired && Model.TicketId > 0)
    {
        foreach (var item in Model.Ticket.Messages.Where(x => x.Sender.Id != Model.UserId).OrderByDescending(x => x.Id).Take(1))
        {
            <div class="notice d-flex bg-light-warning rounded border-warning border border-dashed p-6 mb-5">
                <span class="svg-icon svg-icon-2tx svg-icon-warning me-4"> <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" version="1.1"> <circle fill="#000000" opacity="0.3" cx="12" cy="12" r="10" /> <rect fill="#000000" x="11" y="7" width="2" height="8" rx="1" /> <rect fill="#000000" x="11" y="16" width="2" height="2" rx="1" /> </svg> </span>
                <div class="d-flex flex-stack flex-grow-1">
                    <div class="fw-bold">
                        <div class="fs-6 text-gray-600">
                            <h4>Admin Comment</h4>
                            @Html.Raw(item.Body)
                        </div>
                    </div>
                </div>
            </div>
        }
    }

    @foreach (var itm in Model.ActivationSteps)
    {
        <div class="notice d-flex bg-white shadow-sm rounded flex-stack mb-10 p-6">
            <div class="d-flex flex-stack flex-grow-1 flex-wrap flex-md-nowrap">
                <div class="d-flex">
                    @if (itm.Status)
                    {
                        <span class="svg-icon svg-icon-3tx svg-icon-success me-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                                <path opacity="0.3" d="M10.3 14.3L11 13.6L7.70002 10.3C7.30002 9.9 6.7 9.9 6.3 10.3C5.9 10.7 5.9 11.3 6.3 11.7L10.3 15.7C9.9 15.3 9.9 14.7 10.3 14.3Z" fill="black" />
                                <path d="M22 12C22 17.5 17.5 22 12 22C6.5 22 2 17.5 2 12C2 6.5 6.5 2 12 2C17.5 2 22 6.5 22 12ZM11.7 15.7L17.7 9.70001C18.1 9.30001 18.1 8.69999 17.7 8.29999C17.3 7.89999 16.7 7.89999 16.3 8.29999L11 13.6L7.70001 10.3C7.30001 9.89999 6.69999 9.89999 6.29999 10.3C5.89999 10.7 5.89999 11.3 6.29999 11.7L10.3 15.7C10.5 15.9 10.8 16 11 16C11.2 16 11.5 15.9 11.7 15.7Z" fill="black" />
                            </svg>
                        </span>
                    }
                    else
                    {
                        <span class="svg-icon svg-icon-3tx svg-icon-warning me-4">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" viewBox="0 0 24 24" version="1.1">
                                <circle fill="#000000" opacity="0.3" cx="12" cy="12" r="10"></circle>
                                <rect fill="#000000" x="11" y="7" width="2" height="8" rx="1"></rect>
                                <rect fill="#000000" x="11" y="16" width="2" height="2" rx="1"></rect>
                            </svg>
                        </span>
                    }

                    <div class="mb-3 mb-md-0 fw-bold">
                        <h4 class="text-gray-900 fw-bolder">@itm.Title</h4>
                        <div class="fs-6 text-gray-700 pe-7">@itm.Description</div>
                    </div>
                </div>

                @if (itm.NoButton)
                {
                    if (itm.IsLoading)
                    {
                        <div class="mx-10">
                            <div class="spinner-border" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                        </div>
                    }
                }
                else
                {
                    if (itm.Action == "chn")
                    {
                        <a data-mode="full-modal" data-target="dv_chn_diag" class="btn btn-primary px-6 align-self-center text-nowrap @itm.DisabledCSS">Fix Now</a>
                    }
                    else
                    {
                        <a asp-action="@itm.Action" asp-route-code="@Model.Code" class="btn btn-primary px-6 align-self-center text-nowrap @itm.DisabledCSS">Fix Now</a>
                    }
                }

            </div>
        </div>
    }

</div>

<div id="dv_chn_diag" class="full-modal">
    <div class="full-modal-close" data-dismiss="full-modal"></div>
    <div class="container">
        <div class="scroll h-100 px-5">

            <form id="frm_holders" class="form form-loader" asp-action="UpdateClearingNo" method="post">
                <div class="card-body">
                    <input type="hidden" name="@nameof(ClearingNoModel.Id)" value="@Model.Id" />
                    <div class="row justify-content-center py-5">
                        <div class="col-lg-9 col-md-10">
                            <div class="d-block mb-15">
                                <h1 class="display-5 mb-5">Update your Clearing House Number</h1>
                                <p class="fs-4">
                                    To complete your account verification process, you must include the correct
                                    clearing house number to your profile. If you require assistance getting your
                                    CHN, please raise a support ticket or contact our support team.
                                </p>
                            </div>

                            <h3 class="pb-5 mt-0 mb-9 border-bottom">Certificates</h3>
                            <div>

                                <div class="row mb-0">
                                    <div class="col-md-10">
                                        <div class="form-group row mb-0">
                                            <div class="col-md-8">
                                                <label class="form-label">Name:</label>
                                            </div>
                                            <div class="col-md-4">
                                                <label class="form-label">CHN No:</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <div class="form-group row mb-0">
                                        <div class="col-md-10">
                                            <div class="form-group row mb-0">
                                                <div class="col-md-8 mb-5">
                                                    <input type="text" value="@Model.FullName" class="form-control form-control-solid h-auto px-7" placeholder="Enter account no" readonly />
                                                </div>
                                                <div class="col-md-4 mb-5">
                                                    <input type="text" name="@nameof(ClearingNoModel.ClearingNo)" class="form-control form-control-solid h-auto px-7" placeholder="Enter account no" maxlength="50" required />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>

                            <div class="separator my-10"></div>

                            <div class="mt-10">
                                <div class="row">
                                    <div class="col-lg-6">
                                        <button type="submit" class="btn btn-primary me-2 bt-submit">
                                            <span class="indicator-label">Submit</span>
                                            <span class="indicator-progress">
                                                Please wait... <span class="spinner-border spinner-border-sm align-middle ms-2"></span>
                                            </span>
                                        </button>
                                        <a href="javascript:;" data-dismiss="full-modal" class="btn btn-secondary">Cancel</a>
                                    </div>
                                    <div class="col-lg-6 text-lg-end">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>

        </div>
    </div>
</div>

@section scripts {
    <script src="~/pages/activate.js" asp-append-version="true"></script>
}